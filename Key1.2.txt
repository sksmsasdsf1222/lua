-- 로블록스 서비스 가져오기
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")
local TweenService = game:GetService("TweenService")

-- GUI 생성 함수
local function createGui()
    -- ScreenGui 생성
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "HighQualityGui"
    screenGui.Parent = playerGui

    -- 섬광탄 효과 프레임 생성
    local flashFrame = Instance.new("Frame")
    flashFrame.Size = UDim2.new(1, 0, 1, 0)
    flashFrame.Position = UDim2.new(0, 0, 0, 0)
    flashFrame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    flashFrame.BackgroundTransparency = 1
    flashFrame.Parent = screenGui

    -- 섬광탄 효과 애니메이션
    local tweenInfo = TweenInfo.new(0.5, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut)
    local flashInGoal = { BackgroundTransparency = 0 }
    local flashOutGoal = { BackgroundTransparency = 1 }

    local flashInTween = TweenService:Create(flashFrame, tweenInfo, flashInGoal)
    local flashOutTween = TweenService:Create(flashFrame, tweenInfo, flashOutGoal)

    -- 섬광탄 효과 실행
    flashInTween:Play()
    flashInTween.Completed:Connect(function()
        wait(0.1)  -- 섬광탄 효과를 잠시 유지
        flashOutTween:Play()
        flashOutTween.Completed:Connect(function()
            -- 키 입력 창 생성
            local mainFrame = Instance.new("Frame")
            mainFrame.Size = UDim2.new(0.55, 0, 0.35, 0)  -- 기존보다 10% 더 큼
            mainFrame.Position = UDim2.new(0.5, -192, 0.5, -122)  -- 중앙에 위치
            mainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)  -- 더 어두운 배경색
            mainFrame.BorderSizePixel = 0
            mainFrame.Parent = screenGui

            local corner = Instance.new("UICorner")
            corner.CornerRadius = UDim.new(0, 12)  -- 더 둥글게
            corner.Parent = mainFrame

            -- 제목 표시
            local titleLabel = Instance.new("TextLabel")
            titleLabel.Size = UDim2.new(1, -40, 0, 50)
            titleLabel.Position = UDim2.new(0, 20, 0, 10)
            titleLabel.BackgroundTransparency = 1
            titleLabel.Text = "키 입력 요청"
            titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
            titleLabel.Font = Enum.Font.SourceSansBold
            titleLabel.TextSize = 26
            titleLabel.TextXAlignment = Enum.TextXAlignment.Left
            titleLabel.Parent = mainFrame

            -- 닫기 버튼 생성
            local closeButton = Instance.new("TextButton")
            closeButton.Size = UDim2.new(0, 35, 0, 35)
            closeButton.Position = UDim2.new(1, -45, 0, 10)
            closeButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
            closeButton.Text = "X"
            closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
            closeButton.Font = Enum.Font.SourceSansBold
            closeButton.TextSize = 20
            closeButton.Parent = mainFrame

            local cornerButton = Instance.new("UICorner")
            cornerButton.CornerRadius = UDim.new(0, 10)
            cornerButton.Parent = closeButton

            -- 닫기 버튼 클릭 시 GUI 숨기기
            closeButton.MouseButton1Click:Connect(function()
                screenGui:Destroy()
            end)

            -- 키 입력 요청 텍스트 박스 생성
            local inputPrompt = Instance.new("TextBox")
            inputPrompt.Size = UDim2.new(0.8, 0, 0, 50)
            inputPrompt.Position = UDim2.new(0.1, 0, 0.3, 0)
            inputPrompt.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
            inputPrompt.TextColor3 = Color3.fromRGB(0, 0, 0)
            inputPrompt.Font = Enum.Font.SourceSans
            inputPrompt.TextSize = 22
            inputPrompt.PlaceholderText = "키를 입력하세요..."
            inputPrompt.Parent = mainFrame

            -- 완료 버튼 생성
            local completeButton = Instance.new("TextButton")
            completeButton.Size = UDim2.new(0.8, 0, 0, 40)
            completeButton.Position = UDim2.new(0.1, 0, 0.75, 0)
            completeButton.BackgroundColor3 = Color3.fromRGB(50, 150, 50)
            completeButton.Text = "완료"
            completeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
            completeButton.Font = Enum.Font.SourceSansBold
            completeButton.TextSize = 20
            completeButton.Parent = mainFrame

            local cornerComplete = Instance.new("UICorner")
            cornerComplete.CornerRadius = UDim.new(0, 10)
            cornerComplete.Parent = completeButton

            -- 완료 버튼 클릭 시 입력 처리
            completeButton.MouseButton1Click:Connect(function()
                print("입력된 키: " .. inputPrompt.Text)
                screenGui:Destroy()  -- 완료 후 GUI 제거
            end)
        end)
    end)
end

-- GUI 생성 함수 호출
createGui()